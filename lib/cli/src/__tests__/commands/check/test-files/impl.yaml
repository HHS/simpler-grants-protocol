openapi: 3.0.0
info:
  title: Implementation with Aggressive Circular References
  version: 1.0.0
paths:
  /common-grants/opportunities:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Response"
components:
  schemas:
    Response:
      type: object
      properties:
        data:
          $ref: "#/components/schemas/User"
    User:
      type: object
      properties:
        id:
          type: string
        profile:
          $ref: "#/components/schemas/Profile"
        friends:
          type: array
          items:
            $ref: "#/components/schemas/User"
        manager:
          $ref: "#/components/schemas/User"
        department:
          $ref: "#/components/schemas/Department"
    Profile:
      type: object
      properties:
        user:
          $ref: "#/components/schemas/User"
        avatar:
          $ref: "#/components/schemas/Profile"
    Department:
      type: object
      properties:
        id:
          type: string
        employees:
          type: array
          items:
            $ref: "#/components/schemas/User"
        parent:
          $ref: "#/components/schemas/Department"
        child:
          $ref: "#/components/schemas/Department"
